# [Week1]AI Prompting Engineering

<aside>
💡

 페이지 전체 토글(▶) 열고 닫기

윈도우 : ctrl + alt + t

맥 : cmd + option + t

**크롬 개발자 도구 열기**

윈도우: Window + Shift + c

맥: Command + Shift + c

</aside>

# Anthropic Deep Dive: 프롬프트 엔지니어링의 정석

## 프롬프트 엔지니어링의 본질 (The Essence)

### 프롬프트 엔지니어링의 재정의

Anthropic의 전문가들은 프롬프트 엔지니어링을 "주문(Magic Spell)을 외우는 것"이 아니라 명확한 의사소통(Clear Communication)이라고 정의합니다.

쉽게 말해, AI를 '코딩'하는 것이 아니라 똑똑한 신입 사원에게 업무를 인수인계하는 협업의 기술입니다.

### 훌륭한 엔지니어의 자질: 마음의 이론 (Theory of Mind)

- **정의:** 타인의 마음 상태(의도, 지식, 믿음)를 추론하는 능력입니다.
- **적용:** AI가 내 명령을 보고 "어떤 부분에서 헷갈릴까?", "어떤 배경지식이 부족할까?"를 시뮬레이션하는 능력이 코딩 실력보다 중요합니다.

---

## 1. 핵심 기법 (Core Techniques)

Anthropic이 강조하는 **Claude를 가장 잘 다루는 4가지 핵심 전략**입니다.

### 1.1 구조화 (Structuring with XML)

### XML 태그 활용이란?

모델에게 입력되는 텍스트의 구조를 명확히 알려주기 위해 XML 태그(`< >`)를 사용하는 기법입니다. Claude는 이 태그를 매우 잘 이해하도록 훈련되었습니다.

### 왜 사용하는가?

긴 문서나 복잡한 지시사항이 섞여 있을 때, 모델은 어디까지가 읽어야 할 데이터이고 어디부터가 지시사항인지 혼동할 수 있습니다. XML 태그는 이를 시각적/논리적으로 분리해줍니다.

### 작동 예시 (문서 요약)

**나쁜 예시 (비구조화)**

> 다음 내용을 요약해줘. [계약서 내용 전체...] 그리고 중요한 건 강조해.
> 

**좋은 예시 (XML 활용)**

```jsx
<documents>
    [계약서 내용 전체 붙여넣기...]
</documents>

<instructions>
    위의 <documents>를 읽고 핵심 내용을 3가지로 요약하세요.
    중요한 조항은 굵게 표시하세요.
</instructions>
```

### 효과

- **명확성:** 데이터와 지침의 분리.
- **정확도:** 모델이 참조해야 할 범위를 정확히 인지하여 환각(Hallucination) 감소.

### 1.2 생각의 사슬 (Chain of Thought, CoT)

### CoT의 개념

모델에게 바로 답을 요구하지 않고, **"단계별로 생각한 뒤(Think step-by-step)"** 답을 달라고 요청하는 기법입니다.

### 작동 원리

사람이 어려운 문제를 풀 때 연습장에 풀이 과정을 적는 것과 같습니다. 모델에게 '생각할 시간(토큰)'을 부여하면, 스스로 논리적 오류를 점검하고 수정할 기회를 갖게 됩니다.

### Anthropic 스타일 적용 예시 (`<thinking>` 태그)

```jsx
<instructions>
이 고객의 불만 사항이 환불 규정에 부합하는지 판단하세요.
단, 최종 답변을 내리기 전에 <thinking> 태그 안에서 판단 근거를 단계별로 먼저 서술하세요.
</thinking>
    1. 고객의 불만 유형 분석
    2. 환불 규정 조항 대조
    3. 결론 도출
</thinking>
최종 답변: [여기에 답변 작성]
</instructions>
```

### 1.3 골든 예시 제공 (Few-Shot Prompting)

### 개념

백 마디의 설명보다 **잘 된 예시(Golden Example)** 몇 가지를 보여주는 것이 훨씬 효과적이라는 원리입니다.

### 효과적인 활용 방법

- **스타일 복사:** 원하는 말투나 형식이 있다면 설명을 길게 쓰는 것보다 예시 하나를 보여주는 게 빠릅니다.
- **엣지 케이스 포함:** 쉬운 예시뿐만 아니라, 까다롭거나 예외적인 상황(Edge Case)에 대한 예시를 포함해야 모델이 견고해집니다.

### 1.4 페르소나 부여 (Persona & Context)

### 개념 및 목적

AI에게 역할(Role)을 부여하고, 이 작업이 **왜 필요한지(Context)** 설명합니다.

### 작동 예시

- **Bad:** "이 코드 설명해줘."
- **Good:** "너는 **20년 경력의 시니어 개발자**야. 이 코드는 **이제 막 입사한 신입 사원 교육용**으로 쓰일 거야. 그러니 전문 용어를 피하고 **쉬운 비유**를 들어 설명해줘."

### 1.5 모델과의 솔직한 소통

### 거짓 페르소나 피하기

모델에게 거짓말하지 마세요. "당신은 선생님입니다"처럼 가짜 역할을 부여하는 대신, 실제 필요한 작업을 직접 설명하세요.

- **피해야 할 것:** "당신은 고등학교 선생님입니다. 이 퀴즈를 채점하세요."
- **권장 방법:** "퀴즈 채점을 도와줘야 해. 각 답변을 평가하고 점수를 매겨줘."

### 모델이 처한 상황 명시

모델이 어떤 맥락에서 사용되는지 명확히 알려주세요.

**예시:** "당신은 우리 제품 웹사이트의 팝업 창에 임베드된 고객 지원 챗봇입니다. 회사를 대표해서 친절하고 전문적으로 답변해주세요."

### 똑똑한 신입 인턴처럼 대하기

모델을 회사나 업무에 대한 사전 지식이 전혀 없는 똑똑한 임시직원으로 생각하세요. 모든 맥락을 처음부터 명확하고 구체적으로 설명해야 합니다.

### 1.6 메타포와 비유 활용

### 개념

말로 표현하기 어려운 작업을 메타포나 비유로 설명하면 모델이 더 잘 이해합니다.

### 활용 예시

- "고등학교 선생님이 학생 과제를 평가하듯이 이 차트들의 품질을 평가해줘"
- "신문 기자가 기사를 쓰듯이 이 이벤트를 요약해줘"

### 주의사항

페르소나와 메타포의 균형이 중요합니다. 메타포는 작업 방식을 설명하는 도구이지, 모델에게 거짓 정체성을 부여하는 것이 아닙니다.

---

## 2. 기법 간 차이점 비교

| **기법** | **핵심 특징** | **비유** |
| --- | --- | --- |
| **XML Structuring** | 정보의 구획 정리 | **"서류 정리함"** (데이터는 여기, 지시는 저기에) |
| **Chain of Thought** | 사고 과정의 서술 | **"연습장"** (암산하지 말고 풀이 과정을 적어라) |
| **Few-Shot** | 모범 답안 제시 | **"기출 문제"** (이런 식으로 푸는 거야) |
| **Persona** | 역할 및 맥락 부여 | **"모자 씌우기"** (지금부터 너는 선생님이야) |

---

## 3. 프롬프트 개발 라이프사이클 (The Lifecycle)

프롬프트 엔지니어링은 한 번에 끝나는 작업이 아니라, **시스템을 만드는 공학적 과정**입니다.

### 3.1 단계별 프로세스

1. **초안 작성 (Drafting):** 명확한 의도를 담아 첫 프롬프트를 작성.
2. **테스트 (Testing):** 다양한 입력값을 넣어보며 결과 확인.
3. **평가 (Evaluation):** 결과가 의도에 맞는지 사람이(혹은 AI가) 검증.
4. **반복 수정 (Iteration):** 오류가 난 부분을 수정하고 다시 테스트.

### 3.2 엣지 케이스(Edge Case) 테스트의 중요성

대부분의 사람들은 '쉬운 질문'만 테스트하고 만족합니다. 하지만 견고한 프롬프트를 위해서는 **모델이 실패할 법한 상황**을 테스트해야 합니다.

- **Happy Path (일반적 상황):** "이메일 요약해줘" (내용이 정상적임)
- **Edge Case (예외 상황):** "이메일 요약해줘" (내용이 비어있거나, 욕설이 있거나, 암호문인 경우) -> *이때 모델이 어떻게 행동해야 할지 미리 정의해야 함.*

### 엣지 케이스를 프롬프트에 명시하기

예외 상황을 프롬프트에 직접 포함시켜야 합니다. 모델은 지시사항을 정확히 따르므로, 예외 처리를 명시하지 않으면 일반 입력처럼 처리합니다.

**예시: 차트 품질 평가**

```
<instructions>
업로드된 이미지의 차트 품질을 A, B, C, D, F로 평가하세요.

엣지 케이스 처리:
- 이미지가 차트가 아닌 경우: "차트가 아닌 이미지입니다"라고 응답
- 이미지가 비어있거나 손상된 경우: "이미지를 읽을 수 없습니다"라고 응답
- 여러 개의 차트가 있는 경우: 각각 개별적으로 평가
</instructions>
```

### 3.3 실전 디버깅 전략

### 출력 결과 지속적 확인

프롬프트를 변경한 후에는 **반드시 출력을 확인**하세요. 한 부분을 개선했다가 다른 부분이 망가질 수 있습니다.

- 출력을 읽지 않으면 모델이 실수하는지 알 수 없습니다
- 변경 사항이 의도한 대로 작동하는지 검증
- 부작용이 없는지 전체 응답 검토

### 모델에게 직접 물어보기

작업을 수행하기 전에 모델에게 확인하세요:

```
<instructions>
다음 작업을 수행하기 전에, 먼저 이해가 안 되는 부분이나 
명확하지 않은 부분이 있는지 알려주세요.

[작업 내용...]
</instructions>
```

이 방법으로 프롬프트 개선의 단서를 얻을 수 있습니다.

### 처음 읽는 사람처럼 프롬프트 읽기

오래 작업한 프롬프트는 터널 비전이 발생합니다. 모든 맥락을 제거하고 처음 보는 사람의 관점으로 다시 읽어보세요. 모델이 어떻게 해석할지 더 명확히 파악할 수 있습니다.

### 사용자 행동 패턴 고려

실제 사용자는 완벽한 입력을 주지 않습니다:
- 불완전한 문장
- 누락된 정보
- 오타와 문법 오류

테스트 시 정교한 프롬프트만 사용하지 말고, 실제 사용자처럼 테스트하세요.

### 3.4 출력 형식 제어 기법

### 일관성 vs 다양성

출력 형식을 어떻게 제어할지 결정하세요:

- **일관된 형식을 원할 때**: 많은 예시 제공 (Few-Shot)
  - 예시가 많을수록 모델이 패턴을 따름
  - 형식이 엄격하게 유지됨

- **다양한 형식을 원할 때**: 예시를 적게 제공
  - 형식 제약을 최소화
  - 창의적이고 독특한 출력 생성

### 멀티모달 프롬프팅

이미지 입력/생성 프롬프트는 텍스트 전용과 다르게 접근해야 합니다:
- 대부분의 모델은 텍스트 작업에서 더 우수
- 이미지 작업 시 프롬프트 스타일 조정 필요
- 더 구체적이고 시각적인 설명 사용

---

## 4. 미래의 프롬프트 (Future Outlook)

### 4.1 메타 프롬프팅 (Metaprompting)

- **개념:** 인간이 프롬프트를 짜는 것이 아니라, **AI에게 "좋은 프롬프트를 짜줘"라고 시키는 것**입니다.
- **전망:** 앞으로는 프롬프트 최적화 도구들이 발전하여, 인간은 세부적인 단어를 고치는 것보다 **전체적인 설계를 하는 역할**로 이동할 것입니다.

### 4.2 인간의 역할 변화

- **현재:** Prompt Writer (문장 작성자)
- **미래:** System Architect & Evaluator (작업 정의 및 결과 평가자)
    - "무엇을(What)" 할지 정의하고, 결과가 "좋은지(Good)" 판단하는 능력이 핵심이 됩니다.

---

## 6. 실전 프롬프트 작성 가이드

### 6.1 기본 원칙

### 사람에게 말하듯 작성하기

프롬프트를 과도하게 복잡하게 만들지 마세요. 누군가에게 작업을 설명하듯이 자연스럽게 작성하세요.

- **나쁜 예:** "Execute summarization protocol on document with emphasis on critical elements"
- **좋은 예:** "이 문서를 읽고 핵심 내용 3가지를 요약해줘. 중요한 부분은 강조해줘."

### 프롬프트를 소리 내어 읽기

문법과 의미를 점검하는 효과적인 방법입니다. 소리 내어 읽으면 모델이 어떻게 해석할지 생각하는 계기가 됩니다.

### 가정을 모두 제거하기 (황금률)

머릿속 모든 맥락을 명확히 전달하세요. 모델이 당신이나 작업에 대해 아무것도 모른다고 가정하고, 필요한 모든 정보를 명확히 설명하세요.

### 6.2 실전 워크플로우

### 채팅 재시작 버튼 적극 활용

대화가 막힐 때는 처음부터 다시 시작하세요. 사람과의 대화와 달리 AI는 언제든 리셋이 가능합니다.

### 프롬프트를 프로그래밍처럼 생각하기

- 입력 데이터를 제어한다는 관점으로 접근
- 너무 많은 데이터는 모델을 압도할 수 있음
- 긴 프롬프트는 처리 시간이 증가함
- 데이터 입력의 설계와 트레이드오프 고려

### 지속적인 실험과 시행착오

프롬프트 "작성"이 아니라 프롬프트 "엔지니어링"입니다. 엔지니어링 분야처럼 지속적인 실험이 필요하며, 새로운 시도를 계속해야 최상의 결과를 얻을 수 있습니다.

### 세부사항에 주의 기울이기

완벽한 문법이 직접적으로 응답 품질을 높이지는 않을 수 있지만, 세심한 주의는 전반적인 프롬프트 품질을 향상시킵니다. 프롬프트를 자주 검토하면 자연스럽게 개선됩니다.

### 6.3 학습 및 성장 전략

### 다른 사람의 프롬프트 읽기

우수한 프롬프트 엔지니어의 프롬프트를 연구하세요. 어떻게 최상의 결과를 얻는지 학습하고 커뮤니티 베스트 프랙티스를 습득하세요.

### 불가능해 보이는 것 시도하기

모델의 한계를 테스트하세요. 실패하더라도 프롬프팅과 모델에 대한 이해가 증진됩니다.

### AI를 활용한 프롬프트 작성

AI 모델을 사용해 더 나은 프롬프트를 작성할 수 있습니다. 모델의 훈련 데이터에는 프롬프팅 개념이 포함되어 있어, 좋은 프롬프트 패턴을 학습한 모델을 활용할 수 있습니다.

---

## 7. 프롬프트 엔지니어의 마인드셋

### 7.1 공감과 이해

### 프롬프팅을 가르침으로 생각하기

학생(모델)을 이해하기 위한 공감이 필요합니다:
- 실수의 원인을 분석하세요
- 학생이 이해하는 방식으로 소통 방식을 변경하세요
- 최상의 결과를 위한 맞춤형 접근을 하세요

### Amanda Askell의 핵심 조언

> "복잡한 아이디어를 가져와서 교육받은 일반인이 이해할 수 있게 만드는 것. 그들을 무시하지 않고, 부정확하지 않으면서도, 내가 의미하는 바가 극도로 명확하도록 표현하는 것. 프롬프팅도 매우 유사합니다."

### 7.2 지속적 학습

### 모델 발전에 따른 적응

- 모델이 개선될수록 프롬프트 엔지니어링 핵이 덜 필요해집니다
- 명확한 의사소통이 더 중요해집니다
- 모델을 속이려는 시도보다 직접적인 소통이 효과적입니다

### 단순화하지 말 것

명확하게 소통하는 것과 과도하게 단순화하는 것은 다릅니다:
- 부정확한 정보나 물 탄 버전의 작업을 제공하지 마세요
- 실제 작업을 정확히 전달해야 성공적인 결과를 얻습니다

### 7.3 실험 정신

프롬프트 엔지니어링은 과학이자 예술입니다. 실패를 두려워하지 말고, 계속 실험하며 자신만의 스타일을 개발하세요.

---

## 8. 흔한 실수와 해결책

### 실수 1: 모델에게 거짓 페르소나 부여
- **문제:** "당신은 선생님입니다"처럼 가짜 역할 부여
- **해결:** 실제 필요한 작업을 직접 설명

### 실수 2: 엣지 케이스 무시
- **문제:** 일반적인 상황만 고려
- **해결:** 예외 상황을 프롬프트에 명시

### 실수 3: 출력 확인 소홀
- **문제:** 프롬프트 변경 후 결과를 확인하지 않음
- **해결:** 모든 변경 후 출력을 꼼꼼히 검토

### 실수 4: 과도한 단순화
- **문제:** 명확성을 위해 정보를 지나치게 단순화
- **해결:** 정확하고 완전한 정보 제공

### 실수 5: 사용자 행동 패턴 미고려
- **문제:** 완벽한 입력만 가정
- **해결:** 불완전한 입력을 예상하고 대비

---

## 9. 프롬프트 디버깅 체크리스트

프롬프트가 예상대로 작동하지 않을 때 다음을 확인하세요:

- [ ] 프롬프트를 소리 내어 읽어봤는가?
- [ ] 모델에게 이해 안 되는 부분을 물어봤는가?
- [ ] 엣지 케이스를 명시했는가?
- [ ] 출력 결과를 확인했는가?
- [ ] 처음 보는 사람 관점으로 다시 읽어봤는가?
- [ ] 모든 가정을 제거하고 맥락을 명확히 전달했는가?
- [ ] 실제 작업을 정확히 설명했는가?
- [ ] 사용자 행동 패턴을 고려했는가?

---

## 10. 빠른 참조 가이드

### Do's (해야 할 것)

✅ 사람에게 말하듯 자연스럽게 작성
✅ XML 태그로 구조화
✅ 구체적인 예시 제공
✅ 엣지 케이스 명시
✅ 출력 결과 지속적 확인
✅ 모델에게 솔직하게 대하기
✅ 사고 과정 요청 (Chain of Thought)
✅ 지속적인 실험과 개선

### Don'ts (하지 말아야 할 것)

❌ 거짓 페르소나 부여
❌ 가정에 의존
❌ 엣지 케이스 무시
❌ 출력 확인 소홀
❌ 과도한 단순화
❌ 완벽한 입력만 가정
❌ 트릭과 핵에 의존
❌ 한 번에 완성하려는 시도

---

## 5. 실습 예제: 나쁜 프롬프트 vs 좋은 프롬프트

**상황:** 복잡한 법률 문서를 일반인에게 설명해야 함.

### 🔻 Bad Prompt

> 이 법률 문서 좀 봐줘. 무슨 말인지 모르겠어. 쉽게 설명 좀 해봐. [문서 내용...]
> 

### 🟢 Good Prompt (Anthropic Style)

XML

```jsx
<role>
    당신은 어려운 법률 용어를 일반인도 이해하기 쉽게 풀어주는 '법률 전문 에디터'입니다.
</role>

<documents>
    [법률 문서 내용 붙여넣기...]
</documents>

<instructions>
    1. 위 <documents>의 내용을 분석하세요.
    2. 일반인에게 불리하게 작용할 수 있는 '독소 조항'이 있는지 <thinking> 태그 안에서 먼저 검토하세요.
    3. 최종 답변은 고등학생도 이해할 수 있는 평이한 언어로 작성하세요.
</instructions>
```

---

## 📚 참고 자료 (References)

- **Source:** [Anthropic: AI Prompt Engineering A Deep Dive](https://www.youtube.com/watch?v=T9aRN5JkmL8)
- **Official Guide:** [Anthropic Prompt Engineering Guide](https://docs.anthropic.com/claude/docs/prompt-engineering)
- **Additional Resource:** [27 Prompt Engineering Tips from Anthropic](https://hugesoftware.com/blog/27-prompt-engineering-tips-from-anthropic/)

---

## 📝 학습 정리

이 문서는 Anthropic의 프롬프트 엔지니어링 전문가들이 공유한 핵심 원칙과 실전 팁을 정리한 것입니다. 

**핵심 메시지:**
- 프롬프트 엔지니어링은 마법 주문이 아니라 명확한 의사소통입니다
- 모델을 똑똑한 신입 인턴처럼 대하세요
- 지속적인 실험과 개선이 핵심입니다
- 실패를 두려워하지 말고 계속 시도하세요

**다음 단계:**
1. 실제 프로젝트에 핵심 기법 적용해보기
2. 다른 프롬프트 엔지니어의 작업 연구하기
3. 커뮤니티에서 베스트 프랙티스 학습하기
4. 자신만의 프롬프트 라이브러리 구축하기