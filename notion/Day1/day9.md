# Day 9: Understanding Session State

# 0. ëª©í‘œ

<aside>
ğŸ’¡ **Streamlit ì•± ê°œë°œì˜ ê°€ì¥ í° ì§„ì… ì¥ë²½, Session State ì™„ë²½ ì´í•´í•˜ê¸°**

1. Streamlitì˜ ë…íŠ¹í•œ ì‹¤í–‰ ë°©ì‹(Rerun)ìœ¼ë¡œ ì¸í•œ ë°ì´í„° ì´ˆê¸°í™” ë¬¸ì œë¥¼ ì´í•´í•©ë‹ˆë‹¤.
2. `st.session_state`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì„ ë°°ì›ë‹ˆë‹¤.
3. í´ë¦­ íšŸìˆ˜ê°€ ì‚¬ë¼ì§€ì§€ ì•Šê³  ëˆ„ì ë˜ëŠ” ì¹´ìš´í„°(Counter) ì•±ì„ ë§Œë“­ë‹ˆë‹¤.

</aside>

# 1. ê°œë… ë° ì´ë¡  (Theory)

### Streamlitì˜ ê¸°ì–µ ìƒì‹¤ì¦ (Amnesia)
Streamlitì€ ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ë“± ìƒí˜¸ì‘ìš©ì´ ì¼ì–´ë‚  ë•Œë§ˆë‹¤ **ì½”ë“œ ì „ì²´ë¥¼ ë§¨ ìœ—ì¤„ë¶€í„° ë‹¤ì‹œ ì‹¤í–‰(Rerun)** í•©ë‹ˆë‹¤. ë§ˆì¹˜ ì›¹í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨(F5)í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì¼ë°˜ ë³€ìˆ˜(`count = 0`)ëŠ” ë§¤ë²ˆ 0ìœ¼ë¡œ ë‹¤ì‹œ ì„¤ì •ë˜ì–´ ì´ì „ ê°’ì„ ê¸°ì–µí•˜ì§€ ëª»í•©ë‹ˆë‹¤.

### Session State (The Brain)
ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ Streamlitì€ **Session State**ë¼ëŠ” íŠ¹ë³„í•œ ì €ì¥ê³µê°„ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ëŠ” ì•±ì´ ë‹¤ì‹œ ì‹¤í–‰ë˜ì–´ë„ ì´ˆê¸°í™”ë˜ì§€ ì•ŠëŠ” "ë¸Œë¼ìš°ì € íƒ­ë³„ ì „ìš© ë©”ëª¨ë¦¬"ì…ë‹ˆë‹¤.

# 2. ë‹¨ê³„ë³„ êµ¬í˜„ (Step-by-Step)

### Step 1: ì˜ëª»ëœ êµ¬í˜„ (ì‹¤íŒ¨ ì²´í—˜)

`day9.py`ë¥¼ ë§Œë“¤ê³  ì•„ë˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ì—¬ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.

```python
import streamlit as st

st.title("Day 9: The Amnesia Problem ğŸ¤¯")

col1, col2 = st.columns(2)

with col1:
    st.header("Standard Variable")
    count = 0 # ë§¤ë²ˆ 0ìœ¼ë¡œ ì´ˆê¸°í™”ë¨
    if st.button("Add 1 (Standard)"):
        count += 1
    st.write(f"Count: {count}") 
    # ë²„íŠ¼ì„ ëˆ„ë¥´ëŠ” ìˆœê°„ 1ì´ ëë‹¤ê°€, ë‹¤ì‹œ ëˆ„ë¥´ë©´ 0 -> 1ì´ ë˜ë¯€ë¡œ ì˜ì›íˆ 1ì…ë‹ˆë‹¤.
```

### Step 2: ì˜¬ë°”ë¥¸ êµ¬í˜„ (Session State)

```python
with col2:
    st.header("Session State")
    
    # 1. ì´ˆê¸°í™”: ë©”ëª¨ë¦¬ì— 'counter'ë¼ëŠ” ì¹¸ì´ ì—†ìœ¼ë©´ 0ì„ ë„£ì–´ë‘¡ë‹ˆë‹¤.
    # ì´ ì½”ë“œëŠ” ì•± ì‹¤í–‰ ì¤‘ ë”± í•œ ë²ˆë§Œ ìœ íš¨í•©ë‹ˆë‹¤.
    if "counter" not in st.session_state:
        st.session_state.counter = 0
        
    # 2. ê°’ ì¦ê°€: ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë©”ëª¨ë¦¬ì— ìˆëŠ” ê°’ì„ êº¼ë‚´ì„œ 1ì„ ë”í•©ë‹ˆë‹¤.
    if st.button("Add 1 (State)"):
        st.session_state.counter += 1
        
    # 3. ì¶œë ¥
    st.write(f"Count: {st.session_state.counter}")
```

### Step 3: ì‘ìš© (ì…ë ¥ê°’ ìœ ì§€í•˜ê¸°)

í…ìŠ¤íŠ¸ ì…ë ¥ì°½ë„ ë§ˆì°¬ê°€ì§€ì…ë‹ˆë‹¤. ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ì…ë ¥ì°½ì˜ ë‚´ìš©ì´ ì‚¬ë¼ì§€ì§€ ì•Šê²Œ í•˜ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? (íŒíŠ¸: `key` íŒŒë¼ë¯¸í„° ì‚¬ìš©)

```python
# keyë¥¼ ì§€ì •í•˜ë©´ ìë™ìœ¼ë¡œ session_stateì— í•´ë‹¹ ì´ë¦„ìœ¼ë¡œ ê°’ì´ ì €ì¥ë©ë‹ˆë‹¤.
st.text_input("Enter your name", key="username")

if st.button("Show Name"):
    # ì…ë ¥ì°½ ê°’ì´ st.session_state.usernameì— ì €ì¥ë˜ì–´ ìˆì–´ ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.
    st.write(f"Hello, {st.session_state.username}!")
```

# 3. í•µì‹¬ í¬ì¸íŠ¸ (Key Takeaways)

- **`if "key" not in st.session_state:`**: Session Stateë¥¼ ì‚¬ìš©í•  ë•Œ ê°€ì¥ ë¨¼ì € ì‘ì„±í•´ì•¼ í•˜ëŠ” í•„ìˆ˜ íŒ¨í„´ì…ë‹ˆë‹¤. (ë³€ìˆ˜ ì´ˆê¸°í™”)
- **Rerun**: Streamlit ê°œë°œ ì‹œ "ì½”ë“œê°€ ìœ„ì—ì„œ ì•„ë˜ë¡œ ë‹¤ì‹œ íë¥¸ë‹¤"ëŠ” ì‚¬ì‹¤ì„ í•­ìƒ ì—¼ë‘ì— ë‘ì–´ì•¼ í•©ë‹ˆë‹¤.

---

# ğŸ’¡ ì‹¤ìŠµ ê³¼ì œ (Hands-on Practice)

í´ë¦­í•  ë•Œë§ˆë‹¤ ìˆ«ìê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šê³  ê³„ì† ìŒ“ì´ëŠ” ì¹´ìš´í„°ë¥¼ ë§Œë“¤ì–´ ë´…ë‹ˆë‹¤.

1. `st.session_state`ì— `count`ë¼ëŠ” í‚¤ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ `0`ìœ¼ë¡œ ì´ˆê¸°í™”í•˜ì„¸ìš”.
2. ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ `st.session_state.count` ê°’ì„ 1 ì¦ê°€ì‹œí‚¤ì„¸ìš”.
3. ìµœì¢… ê°’ì„ í™”ë©´ì— ì¶œë ¥í•˜ì„¸ìš”.

# âœ… ì •ë‹µ ì½”ë“œ (Solution)

```python
# Session Stateë¥¼ ì´ìš©í•œ ì¹´ìš´í„° êµ¬í˜„
# 1. ì´ˆê¸°í™”
if "count" not in st.session_state:
    st.session_state.count = 0

# 2. ì—…ë°ì´íŠ¸
if st.button("ìˆ«ì í‚¤ìš°ê¸°"):
    st.session_state.count += 1

# 3. ì¶œë ¥
st.write(f"í˜„ì¬ ìˆ«ì: {st.session_state.count}")
```
