# Day 6: Status UI for Long-Running Task

# 0. ëª©í‘œ

<aside>
ğŸ’¡ **ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì˜ ì§„í–‰ ìƒí™©ì„ ì‹œê°ì ìœ¼ë¡œ ë³´ì—¬ì£¼ëŠ” ìƒíƒœ í‘œì‹œì¤„(Status UI) êµ¬í˜„**

1. LLM í˜¸ì¶œì²˜ëŸ¼ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ì‘ì—…ì—ì„œ ì‚¬ìš©ì ê²½í—˜(UX)ì„ ê°œì„ í•©ë‹ˆë‹¤.
2. `st.status` ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©í•˜ì—¬ ì‘ì—… ë‹¨ê³„ë¥¼ ìƒì„¸íˆ ë³´ì—¬ì¤ë‹ˆë‹¤.
3. ì™„ë£Œ í›„ ìƒíƒœì°½ì„ ì ‘ì–´ ê²°ê³¼ë¥¼ ê°•ì¡°í•˜ëŠ” íŒ¨í„´ì„ ìµí™ë‹ˆë‹¤.

</aside>

# 1. ê°œë… ë° ì´ë¡  (Theory)

### UXì™€ í”¼ë“œë°± (Transparency)
ë²„íŠ¼ì„ ëˆŒë €ëŠ”ë° 3ì´ˆ ë™ì•ˆ ì•„ë¬´ ë°˜ì‘ì´ ì—†ìœ¼ë©´ ì‚¬ìš©ìëŠ” "ê³ ì¥ ë‚¬ë‚˜?"ë¼ê³  ìƒê°í•˜ì—¬ ë²„íŠ¼ì„ ì—¬ëŸ¬ ë²ˆ ëˆ„ë¥´ê±°ë‚˜ ì°½ì„ ë‹«ì•„ë²„ë¦½ë‹ˆë‹¤. **"ì§€ê¸ˆ ~ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤"** ë¼ê³  ì•Œë ¤ì£¼ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ì‚¬ìš©ìëŠ” í›¨ì”¬ ë” ì˜¤ë˜ ê¸°ë‹¤ë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### st.spinner vs st.status
- **`st.spinner`**: ë‹¨ìˆœí•˜ê²Œ ë±…ê¸€ë±…ê¸€ ë„ëŠ” UI. "ê¸°ë‹¤ë¦¬ì„¸ìš”"ë¼ëŠ” ë©”ì‹œì§€ë§Œ ì „ë‹¬í•©ë‹ˆë‹¤.
- **`st.status`**: "ë¬¸ì„œ ë¶„ì„ ì¤‘...", "ì´ˆì•ˆ ì‘ì„± ì¤‘...", "ê²€ìˆ˜ ì¤‘..." ì²˜ëŸ¼ ë³µì¡í•œ ë‹¨ê³„ë¥¼ ë¦¬ìŠ¤íŠ¸ í˜•íƒœë¡œ ë³´ì—¬ì£¼ê³ , ì™„ë£Œë˜ë©´ ë¡œê·¸ì²˜ëŸ¼ ë‚¨ê²¨ë‘˜ ìˆ˜ ìˆëŠ” ê³ ê¸‰ UIì…ë‹ˆë‹¤.

# 2. ë‹¨ê³„ë³„ êµ¬í˜„ (Step-by-Step)

Day 5ì˜ ì½”ë“œë¥¼ ì—…ê·¸ë ˆì´ë“œí•˜ì—¬ `day6.py`ë¥¼ ë§Œë“­ë‹ˆë‹¤.

### Step 1: ì•± êµ¬ì¡° ë³µì‚¬ (Day 5 ê¸°ë°˜)

```python
import streamlit as st
import time
from snowflake.cortex import Complete
# ì—°ê²° ì½”ë“œ ìƒëµ...

st.title("Post Generator with Status ğŸŸ¢")
# ... ìœ„ì ¯ ì½”ë“œ(url, tone ë“±)ëŠ” Day 5ì™€ ë™ì¼ ...
```

### Step 2: st.status ì ìš©

`st.button` ë‚´ë¶€ ë¡œì§ì„ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•©ë‹ˆë‹¤.

```python
if st.button("Generate Post"):
    
    # st.statusë¥¼ ì‚¬ìš©í•˜ì—¬ ì§„í–‰ ìƒíƒœì°½ì„ ì—½ë‹ˆë‹¤. expanded=TrueëŠ” ì²˜ìŒë¶€í„° í¼ì³ì„œ ë³´ì—¬ì¤€ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.
    with st.status("Initializing agent...", expanded=True) as status:
        
        # ë‹¨ê³„ 1: ì¤€ë¹„
        st.write("ğŸ” Reading configuration...")
        time.sleep(1) # ì‹¤ì œ ì‘ì—…ì¸ ì²™ ì‹œê°„ì„ ë•ë‹ˆë‹¤.
        
        # ë‹¨ê³„ 2: í”„ë¡¬í”„íŠ¸ ì‘ì„±
        st.write("âœï¸ Drafting prompt...")
        prompt = f"Create a {tone} post about {url}..."
        time.sleep(1)
        
        # ë‹¨ê³„ 3: LLM í˜¸ì¶œ
        st.write("ğŸ¤– Contacting Snowflake Cortex AI...")
        response = Complete("claude-3-5-sonnet", prompt, session=session)
        
        # ë‹¨ê³„ 4: ì™„ë£Œ ì²˜ë¦¬
        # update() í•¨ìˆ˜ë¡œ ìƒíƒœì°½ì˜ ì œëª©ê³¼ ìƒíƒœ(complete)ë¥¼ ë³€ê²½í•˜ê³  ì°½ì„ ì ‘ìŠµë‹ˆë‹¤(expanded=False).
        status.update(label="Post generated successfully!", state="complete", expanded=False)
        
    # ìƒíƒœì°½ ë°–ì—ì„œ ê²°ê³¼ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
    st.subheader("Final Output")
    st.markdown(response)
```

# 3. í•µì‹¬ í¬ì¸íŠ¸ (Key Takeaways)

- **ì‚¬ìš©ì ì‹¬ë¦¬**: ì§„í–‰ ìƒí™©ì´ êµ¬ì²´ì ì¼ìˆ˜ë¡ ì‚¬ìš©ìëŠ” ì²´ê° ëŒ€ê¸° ì‹œê°„ì„ ì§§ê²Œ ëŠë‚ë‹ˆë‹¤.
- **`status.update`**: ì‘ì—…ì´ ëë‚˜ë©´ "ì„±ê³µ!"ìœ¼ë¡œ ë¼ë²¨ì„ ë°”ê¾¸ê³  ì°½ì„ ë‹«ì•„ì¤Œìœ¼ë¡œì¨, ì‚¬ìš©ìì˜ ì‹œì„ ì´ ìì—°ìŠ¤ëŸ½ê²Œ ê²°ê³¼ë¬¼(Output)ë¡œ ì´ë™í•˜ë„ë¡ ìœ ë„í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì…ë‹ˆë‹¤.
